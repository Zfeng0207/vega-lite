<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Malaysia Employment & Economic Structure Storyboard</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Vega libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <style>
    :root{
      --accent-yellow:#FFD700;
      --title-blue:#002B7F;
      --ink:#1a1a1a;
      --muted:#6b7280;
      --card:#ffffff;
      --panel:#f9fafb;
      --line:#e5e7eb;
      --shadow:0 4px 14px rgba(0,0,0,0.12);
      --link:#0f62fe;
    }

    *{box-sizing:border-box;margin:0;padding:0}

    body{
      font-family:"Inter",system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
      background:url("./data/background.png") repeat center top;
      background-size:cover;
      background-attachment:scroll;
      color:var(--ink);
      line-height:1.6;
      padding:20px;
    }

    .container{max-width:1200px;margin:0 auto;}

    /* ===== Header ===== */
    header{
      text-align:center;
      margin:8px 0 28px 0;
      background:transparent;
      box-shadow:none;
      border-radius:0;
      padding:18px 10px;
    }
    h1{
      font-family:"Playfair Display",serif;
      font-weight:800;
      font-size:2.6rem;
      line-height:1.2;
      color:var(--title-blue);
      letter-spacing:0.2px;
      margin-bottom:10px;
    }
    .title-underline{
      width:180px;height:4px;margin:10px auto 8px auto;
      background:linear-gradient(90deg, transparent, var(--accent-yellow), transparent);
      border-radius:999px;
    }
    .subtitle{
      color:#183153;
      font-size:1.05rem;
      font-weight:600;
      text-wrap:balance;
    }

    /* ===== Section card ===== */
    section.section{
      background:rgba(255,255,255,0.92);
      backdrop-filter:saturate(1.1) blur(0.6px);
      border-radius:14px;
      box-shadow:var(--shadow);
      padding:28px 24px;
      margin-bottom:34px;
    }
    .section-title{
      font-size:1.55rem;
      color:var(--title-blue);
      font-weight:800;
      margin-bottom:20px;
      border-bottom:3px solid var(--accent-yellow);
      padding-bottom:6px;
      letter-spacing:0.2px;
    }

    /* ===== Charts & captions ===== */
    .figure{display:block;max-width:100%;margin:0 auto;}

    h3.chart-title{
      font-size:1.15rem;
      text-align:center;
      color:#1f2937;
      font-weight:700;
      margin-bottom:12px;
      letter-spacing:.1px;
    }

    .chart{
      background:transparent;
      border:none;
      border-radius:0;
      min-height:420px;
      display:flex;align-items:center;justify-content:center;
      margin-bottom:14px;
      padding:0;
    }

    /* ✨ Captions: ≤10 words + larger font */
    .story{
      background:var(--panel);
      border:1px solid var(--line);
      border-radius:12px;
      padding:18px 20px;
      color:#333;
      font-size:1.15rem;         /* enlarged from ~0.985rem */
      line-height:1.5;
      font-weight:600;           /* stronger weight for short captions */
      width:100%;
      margin:0 auto;
      box-shadow:0 2px 8px rgba(0,0,0,0.06);
      text-align:center;         /* short captions look cleaner centered */
    }
    .story strong{font-weight:800;color:#111827}

    /* ===== Footer card with good contrast ===== */
    footer.footer-card{
      background:var(--card);
      color:var(--ink);
      border:1px solid var(--line);
      border-radius:14px;
      box-shadow:var(--shadow);
      padding:18px 20px;
      margin:44px auto 8px auto;
    }
    footer.footer-card p{margin:6px 0}
    footer a{color:var(--link); text-decoration:underline}
    footer .source-list{display:flex;flex-wrap:wrap;gap:10px}
    footer .source-list a{white-space:nowrap}
  </style>
</head>

<body>
  <div class="container">

    <header>
      <h1>Malaysia Employment & Economic Structure</h1>
      <div class="title-underline"></div>
      <p class="subtitle">From participation to production — exploring how people and output connect across states.</p>
    </header>

    <!-- 1) Choropleth -->
    <section class="section" id="sec-map">
      <h2 class="section-title">1. Who’s Working Where?</h2>
      <div class="figure">
        <h3 class="chart-title">Labour Force Participation Rate by State</h3>
        <div id="viz-choropleth" class="chart"></div>
        <div class="story">
          Urban states lead; rural East Coast trails.
        </div>
      </div>
    </section>

    <!-- 2) National Trend -->
    <section class="section" id="sec-trend">
      <h2 class="section-title">2. Gender Trends in Participation</h2>
      <div class="trend-layout">
        <div class="trend-chart">
          <div id="viz-line" class="chart"></div>
        </div>
        <div class="trend-story">
          <div class="story">
            Gender gap narrows gradually during expansions.
          </div>
        </div>
      </div>
    </section>

    <!-- 3) Bubble -->
    <section class="section" id="sec-bubble">
      <h2 class="section-title">3. Participation, Population & GDP by State</h2>
      <div class="figure">
        <div id="viz-bubble" class="chart"></div>
        <div class="story">
          High participation and population drive GDP.
        </div>
      </div>
    </section>

    <!-- 4) State Participation (Bars) -->
    <section class="section" id="sec-bars-pr">
      <h2 class="section-title">4. Regional Gender Gaps</h2>
      <div class="figure">
        <div id="viz-bars-pr" class="chart"></div>
        <div class="story">
          Urban regions show smaller gender gaps.
        </div>
      </div>
    </section>

    <!-- 5) GDP by State (Bars) -->
    <section class="section" id="sec-bars-gdp">
      <h2 class="section-title">5. Where Economic Power Concentrates</h2>
      <div class="figure">
        <div id="viz-bars-gdp" class="chart"></div>
        <div class="story">
          Selangor leads; Johor, Sarawak follow.
        </div>
      </div>
    </section>

    <!-- 6) GDP Composition (Donut/Radial) -->
    <section class="section" id="sec-radial">
      <h2 class="section-title">6. What’s Driving Malaysia’s Output</h2>
      <div class="figure">
        <div id="viz-radial" class="chart"></div>
        <div class="story">
          Services dominate; manufacturing remains strong.
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer-card">
      <p><strong>Author:</strong> Loo Zfeng · <strong>Updated:</strong> 19 Oct 2025</p>
      <p><strong>Data Sources:</strong></p>
      <div class="source-list">
        <!-- Primary sources -->
        <a href="https://www.dosm.gov.my/" target="_blank" rel="noopener">DOSM Homepage</a>
        <a href="https://www.dosm.gov.my/portal-main/release-content" target="_blank" rel="noopener">DOSM Releases</a>
        <a href="https://www.dosm.gov.my/portal-main/release-content/labour-force" target="_blank" rel="noopener">Labour Force Survey</a>
        <a href="https://www.dosm.gov.my/portal-main/release-content/gross-domestic-product" target="_blank" rel="noopener">GDP by Economic Activity</a>
        <!-- Files used in this storyboard -->
        <a href="https://archive.data.gov.my/data/dataset/employed-person-by-sex-and-state-malaysia" target="_blank" rel="noopener">Employability Table</a>
        <a href="https://open.dosm.gov.my/data-catalogue/gdp_state_real_supply" target="_blank" rel="noopener">GDP Table</a>
        <a href="https://open.dosm.gov.my/data-catalogue/population_state" target="_blank" rel="noopener">Population Table</a>
      </div>
      <p><strong>Tools:</strong> Vega-Lite v5 · <strong>License:</strong> Educational use</p>
    </footer>

  </div>

  <!-- Scripts -->
  <script src="./js/script.js"></script>
</body>
</html>
